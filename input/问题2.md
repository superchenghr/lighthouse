# 问题 
企微渠道，客服发送消息时，提示：发送失败，消息发送者不能为空
# 关键词 
企微、发送失败、发送者不能为空
# 排查步骤
1、通过会话id到ysf_session_extend表查询数据，发现没有property_name = wxworkTargetId字段,

SELECT * from ysf_session_extend where session_id = {sessionId} and property_value = 'wxworkTargetId'

2、通过会话id到ysf_message 表查询消息列表，按creteaTime排序

SELECT * from ysf_message where session_id = {sessionId} order by createtime limit 1

3、找到字段msgidclient，该字段是{会话id}#{中台id}的格式，取出{中台id}，{createtime}去日志平台查询，

4、根据日志搜索结果找到关键字：start process text message，复制traceId字段

5、根据{traceId}字段再次去日志平台查询，发现有错误信息，该错误导致向ysf_session_extend写入数据时失败，进而导致发送失败
# 根本原因
企微渠道发送消息需要指定wxworkTargetId，该字段时存在ysf_session_extend表中，在消息进来创建会话时，如果有错误导致写数据库失败，会导致后续客服发送消息没有指定消息对象而失败
# 工具
ysf_session,ysf_session_extend,ysf_message,日志